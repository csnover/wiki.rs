@font-face {
    font-family: source-serif;
    src: url("fonts/SourceSerif4.woff2") format(woff2);
}
@font-face {
    font-family: source-serif;
    font-style: italic;
    src: url("fonts/SourceSerif4-Italic.woff2") format(woff2);
}
@font-face {
    font-family: archivo;
    size-adjust: 96%;
    src: url("fonts/Archivo.woff2") format(woff2);
}
@font-face {
    font-family: archivo;
    font-style: italic;
    size-adjust: 96%;
    src: url("fonts/Archivo-Italic.woff2") format(woff2);
}
@font-face {
    font-family: inconsolata;
    size-adjust: 106%;
    src: url("fonts/Inconsolata.woff2") format(woff2);
}

*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

:root {
    /* You think you can use a repeating-linear-gradient, but then you discover
       that browsers render a pixel horror instead of something beautiful */
    --bar-fill: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4"><g stroke="%23000"><line x1="0" x2="4" y1="4" y2="0" /><line x1="-2" x2="2" y1="2" y2="-2" /><line x1="2" x2="6" y1="6" y2="2" /></g></svg>');
    --bar-fill-alt: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4"><g stroke="%23000"><line x1="0" x2="4" y1="0" y2="4" /><line x1="2" x2="6" y1="-2" y2="2" /><line x1="-2" x2="2" y1="2" y2="6" /></g></svg>');
    --bar-fill-light: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4"><g stroke="%23fff" stroke-width="2"><line x1="0" x2="4" y1="4" y2="0" /><line x1="-2" x2="2" y1="2" y2="-2" /><line x1="2" x2="6" y1="6" y2="2" /></g></svg>');
    --bg: white;
    --body-bottom: 2rem;
    --body-left: 4rem;
    --body-right: 2rem;
    --border-clade: #999;
    --border-fg: lightgrey;
    --bold: 650;
    --border-th: #999;
    --box-margin: 1rem;
    --footer-margin: calc(var(--box-margin) * 4);
    --fg: black;
    --figure-margin: calc(var(--box-margin) * 2);
    --highlight: rebeccapurple;
    --mono: inconsolata, "Segoe UI Mono", "Roboto Mono", monospace, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    --ol-gutter: 1.5rem;
    /* Bad things happen to the baseline grid if this is not unitless */
    --rlh: 1.55;
    --sans: archivo, system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    --serif: source-serif, system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    --shade-bg: #f9f9f9;

    font: 0.95rem/var(--rlh) var(--serif);
    font-weight: 380;
    font-variant-numeric: oldstyle-nums;
    letter-spacing: -.015rem;
}

:link {
    color: hsl(225, 73%, 22%);
    text-decoration-color: royalblue;
}

:visited {
    color: hsl(270, 50%, 20%);
    text-decoration-color: rebeccapurple;
}

:any-link {
    text-underline-position: from-font;

    &[href$="redlink=1"] {
        color: hsl(0, 50%, 20%);
        text-decoration-color: rgb(180, 0, 0);
    }

    &:hover {
        text-decoration-color: transparent;
    }
}

:target:target:target:target {
    background-color: lightyellow;
}

.wiki-rs-body {
    align-items: baseline;
    border-top: .25rem solid var(--highlight);
    display: grid;
    gap: 0 4rem;
    grid-template-columns: auto 18rem;
    padding: 4rem var(--body-right) var(--body-bottom) var(--body-left);
}

.wiki-rs-index {
    align-content: center;
    font-size: 2rem;
    font-weight: 200;
    justify-content: center;
    min-height: 70vh;
}

.wiki-rs-search {
    --border-size: 2px;
    --icon-size: 1.7em;

    border-bottom: var(--border-size) solid currentColor;
    contain: paint style;
    display: flex;
    font-family: var(--sans);
    position: relative;

    &:focus-within {
        border-color: var(--highlight);
        outline: var(--border-size) solid var(--highlight);
    }

    label {
        cursor: text;
        line-height: var(--rlh);
        left: var(--icon-size);
        opacity: .3;
        position: absolute;
        visibility: hidden;
    }

    input {
        --icon-h: calc(1em * 22 / 16);
        --icon-w: calc(1em * 20 / 16);

        all: unset;
        background: transparent url('data:image/svg+xml,<svg viewBox="0 0 20 22" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="10" r="6.5" fill="transparent" stroke="black" stroke-width="2.5" vector-effect="non-scaling-stroke"/><line x1="7.5" y1="14.5" x2="2" y2="20" stroke="black" stroke-width="2.5" vector-effect="non-scaling-stroke"/></svg>') 0 center/var(--icon-w) var(--icon-h) no-repeat;
        border: 0;
        box-sizing: border-box;
        color: rgba(0, 0, 0, 0.3);
        flex: 1;
        font-family: var(--sans);
        font-size: 1em;
        height: calc(1em * var(--rlh));
        padding-left: var(--icon-size);

        &::placeholder {
            all: unset;
            font-family: var(--sans);
            opacity: 0;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        &:focus {
            color: var(--fg);

            &::placeholder {
                opacity: .3;
            }
        }

        &:not(:valid, :focus) {
            + label {
                visibility: visible;
            }
        }
    }

    [type=submit] {
        all: unset;
        align-self: baseline;
        border: 1px outset transparent;
        cursor: pointer;
        line-height: calc(1em * var(--rlh) - 3px);
        margin: 1px 1px 1px .25em;
        padding-inline: .25em;
        user-select: none;
        text-decoration: underline;
        visibility: hidden;

        :focus-within > & {
            background-color: var(--shade-bg);
            border-color: var(--border-fg);
            text-decoration: none;
        }

        &:hover, &:focus {
            text-decoration: none;
        }

        &:active {
            background-color: var(--border-fg);
            border-style: inset;
        }
    }

    &:valid [type=submit] {
        visibility: visible;
    }


    /* padding-left of search + input must = --icon-size */
    .wiki-rs-index > & {
        padding-left: .15em;
        max-width: 50vw;
        min-width: 21.4em;

        label {
            opacity: 1;
        }

        input {
            padding-left: 1.55em;
        }

        [type=submit] {
            font-weight: 600;
            font-stretch: 75%;
        }
    }
}

.wiki-rs-title {
    display: flex;
    align-items: baseline;
    grid-column: 1;
    grid-row: 1;

    > * {
        min-width: 0;
    }

    > :first-child {
        flex: 1;
    }

    > .mw-indicators {
        display: flex;
        white-space: nowrap;

        img {
            height: revert-layer;
            vertical-align: bottom;
        }

        > * + * {
            margin-left: 1rem;
        }
    }
}

.wiki-rs-incomplete {
    --icon-h: 1em;
    --icon-w: 1em;
    background: transparent url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M16 13h16c1.1 0 2-.9 2-2s-.9-2-2-2H16c-1.1 0-2 .9-2 2s.9 2 2 2zm0 6h16c1.1 0 2-.9 2-2s-.9-2-2-2H16c-1.1 0-2 .9-2 2s.9 2 2 2zM40 2H8a2 2 0 0 0-2 2v24.8c0 .6.4 1 .9 1.1.3 0 .6-.1.8-.3l4.2-3.9 5.9 5.6 6.2-5.7 5.5 5.1c.4.3 1 .3 1.4 0l5.3-5.1 4.1 3.7c.4.4 1 .4 1.4 0 .2-.2.3-.5.3-.8V4a2 2 0 0 0-2-2zm-2 19.9-1.2-1.1c-.4-.3-1-.3-1.4 0l-5.2 5-5.5-5c-.4-.3-1-.3-1.4 0l-5.4 5-5.3-5c-.4-.3-1-.3-1.4 0L10 22V6h28v15.9zm-2.6 7.9-5.2 5-5.5-5c-.4-.3-1-.3-1.4 0l-5.4 5-5.3-5c-.4-.3-1-.3-1.4 0L6 34.7V44c0 1.1.9 2 2 2h32a2 2 0 0 0 2-2v-9.6l-5.2-4.6c-.4-.3-1-.3-1.4 0zM38 42H10v-5.6l1.9-1.7 5.2 5c.4.3 1 .3 1.4 0l5.5-5.1 5.5 5.1c.4.3 1 .3 1.4 0l5.3-5.1 1.8 1.6V42z"/></svg>') 0 center/var(--icon-w) var(--icon-h) no-repeat;
    font-family: var(--sans);
    padding-left: 1.1em;
    padding-right: .05em;
}

.wiki-rs-nav {
    --top: 2rem;
    display: flex;
    flex-direction: column;
    grid-column: 2;
    grid-row: 1/3;
    max-height: calc(100vh - var(--top) * 2);
    position: sticky;
    top: var(--top);
}

.wiki-rs-toc {
    --scrollbar-padding: .5rem;
    font-family: var(--sans);
    font-size: 105%;
    font-stretch: 80%;
    margin-top: 4rem;
    margin-right: calc(var(--scrollbar-padding) * -1);
    overflow-y: auto;
    padding-right: var(--scrollbar-padding);
    scrollbar-width: thin;
    scrollbar-color: grey transparent;

    ul {
        list-style: none;
        padding-left: 0;
        margin-left: 1rem;

        > * + * {
            margin-top: calc(var(--box-margin) * .25);
        }
    }

    & > ul {
        margin-left: 0;
    }
}

.wiki-rs-content {
    container: main-article / inline-size;
    contain: inline-size layout style paint;
    grid-column: 1;
    grid-row: 2;
    overflow: hidden;
    overflow-wrap: break-word;
    /* weird padding and margin stuff to avoid big overflow (caused by giant
       nowrap tables) whilst allowing small overflow (because normally tables
       and ordered lists bleed into the margins) */
    margin-right: -2rem;
    margin-left: -4rem;
    padding-left: 4rem;
    padding-right: 2rem;
}

.wiki-rs-bye {
    display: flex;
    font-family: var(--sans);
    margin-top: 4rem;

    > svg {
        height: 2.25rlh;
        margin-right: .5rem;
        transform: translateY(-.075rlh);
    }

    > div {
        > :first-child {
            font-weight: 550;
        }

        > hr {
            margin-block: calc(var(--box-margin) * 2) calc(var(--box-margin) * .33);
        }

    }
}

.wiki-rs-pagination {
    --gap: 2em;
    background-color: var(--bg);
    border-top: 3px solid currentColor;
    grid-column: span 2;
    font-family: var(--sans);
    font-variant-numeric: tabular-nums;
    margin-left: calc(var(--body-right) - var(--body-left));
    margin-bottom: calc(var(--body-bottom) * -1);
    margin-top: 4rem;
    padding-bottom: var(--body-bottom);
    padding-top: .5rem;
    position: sticky;
    bottom: 0;

    > ul {
        display: flex;
        gap: var(--gap);
        justify-content: center;
        list-style: none;
        padding: 0;

        > * {
            margin-top: 0;
            padding: 0;
            white-space: nowrap;

            /* Affordance */
            > :any-link {
                margin-inline: -.5em;
                padding-inline: .5em;
            }
        }

        > .first::after,
        > .last::before {
            content: '…';
        }

        > .first::after {
            margin-left: var(--gap);
        }

        > .last::before {
            margin-right: var(--gap);
        }
    }
}

.wiki-rs-search-results {
    column-width: 30em;
    gap: calc(var(--ol-gutter) * 2);
    margin-top: 4rem;
}

.wiki-rs-timeline {
    font-family: var(--sans);
}

.wiki-rs-timeline-main-axis,
.wiki-rs-timeline-cross-axis {
    font-variant-numeric: lining-nums;
}

abbr {
    cursor: help;
    text-decoration: underline dotted;
}

table {
    border-collapse: collapse;
}

hr {
    border: solid currentColor;
    border-width: thin 0 0;
}

img {
    height: auto;
}

cite {
    font-style: normal;
}

code, kbd, pre, samp, tt, .mw-highlight {
    font-family: var(--mono);
}

sub {
    position: relative;
    top: .125em;
    vertical-align: baseline;
}

sup {
    position: relative;
    top: -.5em;
    vertical-align: baseline;
}

math {
    font-family: var(--serif);
}

pre,
.mw-highlight {
    hyphens: none;
    tab-size: 4;
    white-space: pre-wrap;
    word-wrap: break-word;
}

b, strong {
    font-weight: var(--bold);
}

h1, h2, h3, h4, h5, h6 {
    font-family: var(--sans);
    font-variant-numeric: normal;
    hyphens: none;
}

h1 {
    font-size: 3.5rem;
    font-stretch: 80%;
    font-weight: 200;
    line-height: 1.1;
}

h2 {
    border-top: 3px solid currentColor;
    clear: left;
    font-size: 1.5rem;
    font-stretch: semi-expanded;
    line-height: 1rlh;
    margin-right: auto;
    padding: .1rlh 0 .4rlh;
    width: fit-content;

    + * {
        margin-top: var(--box-margin);
    }

    + h3 {
        margin-top: 0;
    }
}

h3 {
    font-size: 1rem;
    font-stretch: 150%;
    text-transform: uppercase;
}

h5 {
    font-size: 0.83em;
    font-stretch: 150%;
    text-transform: uppercase;
}

h6 {
    font-size: 0.83em;
    font-stretch: 120%;
}

dt {
    font-family: var(--sans);
}

th {
    font-family: var(--sans);
    hyphens: none;
}

.reference {
    font-family: var(--sans);
    font-size: 75%;
    font-variant-numeric: normal;
    position: relative;
    text-decoration: none;
    top: -.5em;
    white-space: nowrap;

    &::before {
        content: '[';
    }

    &::after {
        content: ']';
    }
}

.references,
.wiki-rs-search-results ol {
    margin-inline-start: calc(var(--ol-gutter) * -1);

    > *::marker {
        font-family: var(--sans);
        font-size: 83%;
        font-variant-numeric: tabular-nums;
    }
}

/* overrides for garbage <templatestyle> injections */
.mw-parser-output {
    --aside-gutter-align: translateX(min(0%, calc(var(--aside-max) * -1 + 100%)));
    --aside-max: calc(100cqw - var(--figure-margin) - var(--max-width));
    --aside-min: 23rem;
    --background-color-base: transparent;
    --background-color-interactive: transparent;
    --background-color-interactive-subtle: transparent;
    --background-color-neutral: transparent;
    --background-color-neutral-subtle: transparent;
    --border-color-base: var(--border-fg);
    --border-color-subtle: transparent;
    --box-tag: transparent linear-gradient(135deg, var(--fg) var(--tag-size), transparent var(--tag-size)) 0%/calc(var(--tag-size) * 2) no-repeat;
    --color-base: #000;
    --color-subtle: var(--color-base);
    --max-width: 70rem;
    --side-table-stretch: 80%;
    --table-margin-inline: calc(var(--table-padding-inline) * -1);
    --table-padding-block: .1rem;
    --table-padding-inline: .5rem;
    --table-width: calc(min(100%, var(--max-width)) + var(--table-margin-inline) * -2);
    --tag-size: .4rem;
    --sidebar-stretch: 110%;

    --legend-border: var(--fg);
    --legend-lh: .5;
    --legend-wh: calc(1ex + 2px);
    --legend-valign: baseline;

    /**********/
    /* Layout */
    /**********/

    > *,
    /* Using `:where()` to keep header, etc. styles working correctly */
    :where(blockquote, .documentation, .templatedata-header, .excerpt) > * + * {
        margin-top: var(--box-margin);
    }

    > :where(:not(.navbox, .wiki-rs-categories, .reflist, .refbegin, .portal-bar, .sister-bar, .wikitable)) {
        max-width: var(--max-width);
    }

    audio {
        height: 1rlh;
        vertical-align: top;
    }

    audio, video {
        max-width: 100%;
    }

    ol, ul {
        padding-left: var(--ol-gutter);

        > * {
            + * {
                margin-top: calc(var(--box-margin) * .25);

                .plainlist & {
                    margin-top: 0;
                }
            }

            > :is(ol, ul) {
                margin-top: calc(var(--box-margin) * .25);
            }
        }
    }

    /* In MediaWiki, these empty elements would get `.mw-empty-elt`. Technically
       it would hide the display of elements with (1) no attributes and (2) only
       whitespace, but we’ll do it this way instead until it turns out we can’t.
       In particular, this hides bogus empty elements caused by list
       constructions like this:

       ```
       * {{List-item-generating template}}
       ```

       (This expands to `* \n* <template content>` due to the T2529 rule.)

       It appears that table rows should not receive this treatment since,
       apparently, empty table rows are used to fix up styles in the presence of
       rowspans, as in 'Template:Largest cities'.
    */
    :is(li, p):not([class], [style]):empty {
        display: none;
    }

    :is(ol, ul):not([class]) > * {
        padding-left: .1rem;

        .hlist &,
        .plainlist &,
        /* TODO: Too many templates rely on list items having no padding, like
        navbar-brackets from 'Template:Navbar' */
        &[class] {
            padding-left: 0;
        }
    }

    ul {
        padding-left: 1rem;
    }

    dl {
        padding-left: 0;
    }

    /* Because this element is extremely heavily abused as a mechanism for indenting
    content, we have little choice but to also do that */
    dd {
        margin-left: 1rem;
    }

    .wiki-rs-categories {
        border-top: .25rem solid currentColor;
        clear: both;
        font-family: var(--sans);
        font-size: 95%;
        font-variant-numeric: normal;
        font-weight: 350;
        list-style: none;
        padding: .5rem 0;
        margin-top: var(--footer-margin);

        &::before {
            content: 'in: ';
            font: italic 600 1em var(--serif);
        }

        > * {
            display: inline;
        }

        > * + * {
            &::before {
                content: ' / ';
            }
        }
    }

    blockquote, dd, li, p {
        /* 'Toronto' gets a lot of bad character distribution with
           shorter hyphenation limits */
        hyphenate-limit-chars: 6 3 4;
        hyphens: auto;
        text-align: justify;
        text-justify: distribute;
        text-justify: inter-character;
    }

    * + h2 {
        margin-top: 5rem;
    }

    * + h3 {
        margin-top: calc(var(--box-margin) * 1.5);

        + :is(p, ul, ol, dl, .mw-halign-right, .mw-halign-left, .floatright),
        + *:has(> :first-child:is(p, ul, ol, dl, .mw-halign-right, .mw-halign-left, .floatright)),
        + :is(.mw-halign-right, .mw-halign-left, .floatright) + * {
            margin-top: 0;
        }
    }

    :is(h4, h5, h6) + * {
        margin-top: 0;

        &:is(.mw-halign-right, .mw-halign-left) + * {
            margin-top: 0;
        }
    }

    * + dt {
        margin-top: var(--box-margin);
    }

    /******************/
    /* Common classes */
    /******************/

    .redirectText,
    .mw-redirectedfrom {
        font-family: var(--sans);

        &::before {
            content: '⮎ ';
        }
    }

    .mw-redirectedfrom::before {
        content: '⤷ ';
    }

    .selflink {
        font-weight: var(--bold);
    }

    .monospaced {
        font-family: var(--mono);
    }

    .error {
        color: rebeccapurple;
        font-family: var(--sans);
        font-weight: normal;
    }

    .nowrap {
        white-space: nowrap;
    }

    /* 'Template:Time Persons of the Year' puts `.wrap` inside `.nowrap`, which
       is a load-bearing pattern for not breaking layout. */
    .wrap {
        white-space: normal;
    }

    .wikitable,
    .tracklist, /* 'Template:Track listing' */
    .us-census-pop, /* 'Template:US Census population' */
    .bar-chart, /* 'Template:Bar chart' */
    [data-wiki-rs~=template-historical-populations] /* 'Template:Historical populations' */
    {
        border: 0;
        border-bottom: thin solid var(--border-fg);
        border-collapse: collapse;
        font-variant-numeric: tabular-nums;
        margin-inline: var(--table-margin-inline);
        width: var(--table-width);

        > tbody > tr:nth-child(2n) {
            background-color: var(--shade-bg);
            /* For the case where there are shaded rowspans, ensure they are
            visually separated */
            border-top: thin solid var(--bg);
        }

        /* This is a ridiculous hack for improving the visual design of tables
           with 2 or 3 rowspan headers by making sure that the stripe for the
           second row is also visible behind the spanned rows. Using `::after`
           to avoid conflict with the 'Template:Static row numbers', though it
           could be made to work with either one, probably. */
        > tbody > tr:first-child:has(> [rowspan]) + tr {
            position: relative;

            &::after {
                background-color: var(--shade-bg);
                content: "";
                display: block;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
                position: absolute;
                z-index: -1;
            }
        }

        caption, td, th {
            background-color: transparent;
            border: 0;
        }

        caption {
            font-family: var(--sans);
            padding: 0;
        }

        td, th {
            padding: var(--table-padding-block) var(--table-padding-inline);
            text-align: start;
        }

        th {
            font-variant-numeric: tabular-nums;

            &[colspan] {
                text-align: center;
            }
        }

        tr:first-child:not(:has(> td)) > th {
            vertical-align: bottom;
        }

        /* this crazy nonsense is just trying to make it so that the top row(s)
           of headings in a table have borders to separate them from the table
           data, whilst making sure that row headings do not get underlined */
        tr:first-child > th:not([scope=row]),
        tr:first-child:not(:has(> td)) + tr:not(:has(> td)) > th,
        th[scope=col] {
            border-bottom: thin solid var(--border-th);
        }

        tr:first-child + tr:not(:has(> td)) {
            border-top: 0;
        }

        &.floatright,
        &.us-census-pop-right, /* 'Template:US Census population' */
        &.bar-chart-right,
        &[data-wiki-rs~=template-historical-populations], /* 'Template:Historical populations' */
        &[style*="float:right"],
        &[style*="float: right"],
        &[style*="float:left"],
        &[style*="float: left"]
        {
            max-width: 50cqw;
            /* !important: 'Crazy Taxi' */
            margin-left: var(--figure-margin) !important;
            margin-bottom: var(--figure-margin) !important;
            transform: var(--aside-gutter-align);
            width: auto;
        }

        /* 'Mount Everest' manually floats a table right after a floated right
           figure and inevitably sad things happen */
        &[style*="float:right"],
        &[style*="float: right"] {
            clear: right;
        }

        &[style*="float:left"],
        &[style*="float: left"]
        {
            margin-left: 0 !important;
            margin-right: var(--figure-margin) !important;
            transform: translateX(var(--table-margin-inline));
        }
    }

    /* 'Mount Everest' does float left and clear */
    .wikitable:is(
        .floatleft, [style*="float:left"], [style*="float: left"],
        .floatright, [style*="float:right"], [style*="float: right"]
    ):where(:not(:has(+ [style*="clear"]))) {
        font-family: var(--sans);
        font-stretch: var(--side-table-stretch);
        font-size: unset !important;
        font-variant-numeric: tabular-nums;

        caption {
            font-stretch: normal;
        }
    }

    .floatleft {
        clear: left;
        float: left;
        margin-bottom: var(--figure-margin);
        margin-right: var(--figure-margin);
    }

    .floatright,
    .tright, /* 'Template:Thumb image' */
    .us-census-pop-right, /* 'Template:US Census population' */
    .stack-clear-right, /* 'Template:Stack start' */
    .stack-right, /* 'Template:Stack start' */
    .side-box-right, /* 'Template:Side box' */
    .portalright /* 'Template:Portal' */
    {
        clear: right;
        float: right;
        margin-bottom: var(--figure-margin);
        margin-left: var(--figure-margin);
        transform: var(--aside-gutter-align);
    }

    /* :-((((( */
    /* 'Chelyabinsk meteor' commits this atrocity */
    [style*="float:right"]:has(> .wikitable[style*="float:right"][style*="margin"]) {
        margin-left: var(--figure-margin);
        > * {
            margin-left: 0 !important;
            margin-right: var(--table-margin-inline) !important;
            width: auto;
        }
    }

    > .wikitable[style*="border"][style*="margin"], /* 'Toronto' */
    .succession-box /* 'Template:S-start' */
    {
        margin-inline: var(--table-margin-inline) !important;

        * + & {
            margin-top: var(--box-margin) !important;
        }
    }

    /* 'Toronto' */
    > .wikitable[style*="border"][style*="margin"] {
        border-width: 0 0 thin !important;
    }

    .mw-cite-backlink > :first-child {
        + p {
            display: inline;
        }

        + ul {
            display: inline;
            padding-left: 0;

            > :first-child {
                display: inline;
                padding-left: 0;
            }
        }
    }

    /***********/
    /* Figures */
    /***********/

    figure {
        overflow: hidden;

        &.mw-halign-left,
        &.mw-halign-right {
            max-width: var(--aside-max);

            p + & {
                margin-top: var(--box-margin);
            }
        }

        &.mw-halign-left {
            clear: left;
            float: left;
            margin-right: var(--figure-margin);
            margin-bottom: var(--figure-margin);
            min-width: var(--aside-min);
        }

        &.mw-halign-right {
            clear: right;
            float: right;
            margin-left: var(--figure-margin);
            margin-bottom: var(--figure-margin);
            min-width: var(--aside-min);
            transform: var(--aside-gutter-align);
        }

        img {
            display: block;
        }
    }

    figcaption {
        font-family: var(--sans);

        span.legend + span.legend {
            margin-left: .25em;

            &::before {
                content: ' ';
                white-space: normal;
            }
        }

    }

    /* Used in 'Canada' and 'McDonnell Douglas MD-11' */
    .legend-color {
        border-color: var(--legend-border);
        line-height: var(--legend-lh);
        min-width: var(--legend-wh);
        height: var(--legend-wh);
        vertical-align: var(--legend-valign);
    }

    /*************************/
    /* Template:!mxt         */
    /* Template:Section link */
    /*************************/

    [style*="font-family: monospace"],
    [style*="font-family:monospace"] {
        font-family: var(--mono) !important;
    }

    /**********************/
    /* Template:Var serif */
    /**********************/

    .var-serif {
        font-family: var(--serif);
        font-size: 100%;
    }

    /*******************/
    /* Template:Button */
    /*******************/

    [style*="font-family: sans-serif"],
    [style*="font-family:sans-serif"] {
        font-family: var(--sans) !important;
    }

    /********************/
    /* Template:Hatnote */
    /********************/

    .hatnote.hatnote {
        margin-bottom: 0;
        padding-left: 0;

        :is(h2, h3, h4, h5) + &,
        .hatnote + &,
        .hatnote + .mw-halign-right + & {
            margin-top: 0;
        }
    }

    /******************/
    /* Template:Stack */
    /******************/

    .stack.stack.stack {
        &.stack-clear-right,
        &.stack-right {
            margin-bottom: var(--figure-margin);
            margin-left: var(--figure-margin);
        }

        > * > * {
            border-bottom: none;
            float: none;
            margin: 0 !important;

            + * {
                margin-top: calc(var(--box-margin) * .25) !important;
            }
        }

        .navbox-title {
            border-bottom-color: var(--fg);
            line-height: 1.1;

            span[style*=line-height] {
                line-height: inherit !important;
            }
        }

        .navbox-list {
            border: 0;
            font-family: var(--sans);
            font-size: 1rem;
            font-stretch: var(--side-table-stretch);

            > div {
                padding: 0 !important;
            }

            > div > b,
            > div > p > b {
                font-family: var(--sans);
                font-size: 1rem;
                font-stretch: 100%;
            }

            > div > p {
                text-align: inherit;

                * + & {
                    border-top: thin solid var(--fg);
                    margin-top: calc(var(--box-margin) * .25);
                }
            }

            &.hlist ul {
                padding: 0;
                text-align: left;
            }
        }
    }

    /********************/
    /* Template:Infobox */
    /* Template:Sidebar */
    /********************/

    /* This very silly nonsense is required because 'World War II' expects to
       be able to put an infobox in a 'Template:Stack' along with a navbox and
       use the same em-width on both children and have them come out the same
       size. The default MW styles set this style. */
    .infobox, .sidebar {
        font-size: 88%;

        > * {
            font-size: 1rem;
        }
    }

    .infobox.infobox, .sidebar {
        --tag-size: 1rem;

        border: solid var(--fg);
        border-width: 3px 0;
        clear: right;
        float: right;
        font-family: var(--sans);
        margin: var(--box-margin) 0 var(--figure-margin) var(--figure-margin);
        padding: 0;

        &:has(> caption:first-child) {
            border-top: 0;
        }

        > caption {
            border-top: 3px solid var(--fg);
        }

        > tbody > :last-child > * {
            padding-bottom: calc(var(--box-margin) * .5) !important;
        }

        /* 'Elizabeth II' nests infoboxes */
        /* 'Template:Climate chart' floats to the left too */
        .mw-parser-output > &:not([style*="float: left"]) {
            max-width: var(--aside-max);
            min-width: var(--aside-min);
            transform: var(--aside-gutter-align);
        }

        * + & {
            /* !important: 'Wikipedia' */
            margin-top: var(--box-margin) !important;
        }

        &.sidebar {
            background: transparent !important;
            border-spacing: 0;
            line-height: 1.5rem;
            max-width: 18rem;

            /* !important: 'Template:History of Ryukyu' */
            .infobox[style*="width:100%"] {
                width: 100% !important;
            }
        }

        td, th {
            padding: 0;
            vertical-align: top;
        }

        th {
            font-stretch: var(--side-table-stretch);
        }

        .infobox-above,
        .infobox-title,
        .sidebar-title,
        .sidebar-title-with-pretitle {
            background-color: transparent !important; /* !important: 'Fart' */
            color: var(--fg) !important; /* !important: 'Manchester United F.C.' */
            font-size: 1.1rem !important; /* !important: 'Crazy Taxi' */
            font-stretch: var(--sidebar-stretch);
            font-style: normal !important; /* !important: 'Crazy Taxi' */
            font-weight: bold;
            line-height: 1.2;

            /* !important: 'Minnesota' */
            [style*=font-size] {
                font-size: inherit !important;
            }
        }

        .infobox-title,
        .infobox-above {
            padding-block: calc(var(--box-margin) * .25);
            border-bottom: thin solid var(--fg);
        }

        .infobox-subheader {
            background-color: transparent;
            border: 0;
            padding-bottom: 0;
        }

        tr:has(+ .ib-settlement-official) > .infobox-subheader {
            padding-bottom: 0;
        }

        .ib-settlement-official + tr > * {
            border-top: thin solid var(--fg);
        }

        .ib-settlement-cols {
            margin-top: calc(var(--box-margin) * .5);
        }

        .ib-settlement-caption-link {
            font-size: .9rem;
        }

        tr:has(+ .mergedtoprow) > * {
            padding-bottom: calc(var(--box-margin) * .25);
        }

        .mergedtoprow.mergedtoprow > * {
            padding-top: calc(var(--box-margin) * .25);
        }

        tr:not([class]):has(+ .mergedrow) > *,
        .mergedtoprow:not(.ib-settlement-official) > :not(.infobox-subheader) {
            border-top: thin solid var(--fg);
        }

        .sidebar-title {
            border: 0 0 thin solid var(--fg) !important; /* !important: 'Manchester United F.C.' */
            /* Matching MW '.navbox-title' */
            padding: .25em 1em;
        }

        /* !important: 'Template:Conservation status' */
        .sidebar-title > [style*=font-size] {
            font-size: smaller !important;
            font-stretch: normal;
        }

        .sidebar-pretitle {
            font-size: 95%;
            padding-top: calc(var(--box-margin) * .25);
        }

        .sidebar-above {
            border-bottom: thin solid var(--fg);
        }

        .sidebar-pretitle,
        .sidebar-heading,
        .sidebar-content,
        .sidebar-below {
            background-color: transparent !important;
            color: inherit !important;

            /* !important: 'Template:Conservation status' */
            :any-link > [style*=color] {
                color: inherit !important;
            }

            /* !important: 'Template:Content policy list' */
            > [style*="font-size:120%"] {
                font-size: inherit !important;
                font-stretch: var(--sidebar-stretch);
            }
        }

        .sidebar-heading {
            font-size: 105%;
            padding-top: calc(var(--box-margin) * .25);
            text-align: left;

            &[style*=padding] {
                padding: calc(var(--box-margin) * .25) 0 0 !important;
            }
        }

        .sidebar-below {
            border-top-color: var(--fg) !important;
            border-bottom: 0 !important;
            font-size: .9rem;
            font-weight: normal;
            padding-top: calc(var(--box-margin) * .5) !important;

            br {
                display: none;
            }
        }

        .sidebar-content {
            font-stretch: var(--side-table-stretch);
            padding-bottom: calc(var(--box-margin) * .25);
            text-align: left !important;

            /* 'Template:United States House of Representatives' */
            [style*=padding] {
                padding-inline: 0 !important;
            }

            /* 'Template:Greek dieties (primordial)' */
            > .div-col:first-child {
                margin-top: 0;
            }

            ul li + li {
                margin-top: 0;
            }

            /* 'Template:United States House of Representatives' */
            > hr {
                border: 0;
                margin-top: calc(var(--box-margin) * .25);
            }
        }

        .sidebar-navbar {
            padding-bottom: .15em;
            font-stretch: var(--sidebar-stretch);
        }

        .sidebar-title-with-pretitle {
            font-size: 110%;
            /* !important: 'Template:Economic systems sidebar' */
            padding: 0 0 calc(var(--box-margin) * .25) !important;
            text-align: center;

            .tmp-color {
                color: inherit !important;
            }
        }

        .sidebar-image {
            border-bottom: thin solid var(--fg);
            border-top: thin solid var(--fg);
            font-size: .9rem;
            padding-block: calc(var(--box-margin) * .25);
        }

        .sidebar-list-title {
            /* !important: 'Template:Sociology' */
            background: transparent !important;
            border-top: 0 !important;
            padding: calc(var(--box-margin) * .25) 0 0;
            line-height: inherit;
        }

        &.ib-country, &.ib-settlement {
            line-height: unset;
        }

        .infobox-data,
        .infobox-label,
        .infobox-full-data {
            border: 0;
            line-height: unset;
            padding: 0;
        }

        .infobox-full-data.anthem {
            border-top: thin solid var(--fg);
        }

        .infobox-label {
            padding-right: .3rem;
            line-height: 1.2;
            text-align: start;
            /* keep first baseline alignment w/ reduced line height */
            transform: translateY(.185em);

            > * {
                /* !important: At least 'Template:Infobox company' creates an
                   inline block with inline top padding style which breaks the
                   text grid */
                padding-top: 0 !important;
            }

            > [style*=text-indent],
            .ib-country-fake-li {
                text-indent: -1ch !important;
                margin-left: 1ch !important;
            }
        }

        .infobox-image {
            font-size: .9rem;
            padding-block: calc(var(--box-margin) * .5);
            text-align: center;

            img {
                display: block;
                /* Since there is currently no way to load any actual images,
                   avoid taking up a bunch of space on giant placeholders */
                max-height: 3rlh;
                margin-inline: auto;
                width: 100%;
            }
        }

        .infobox-header {
            /* !important: 'Rust (programming language)' */
            background-color: transparent !important;
            /* !important: 'Minnesota' */
            &[style*=border-top] {
                border-top: 0 !important;
            }
            padding: 0;

            &.description {
                font-stretch: normal;
            }

            /* Because it is a table cell, to get a horizontal rule with
               spacing, choose poison: a nasty selector that walks backward, or
               a pseudo-element */
            /* padding-top: .6rem;
            &::before {
                border-top: thin solid var(--fg);
                content: '';
                display: block;
                transform: translateY(.1rem);
            } */
        }

        > tbody > tr > td:has(> .tmulti) {
            border-bottom: thin solid var(--fg) !important;
            line-height: 1.4 !important;
            font-stretch: var(--side-table-stretch);
            padding-bottom: .5rem;
            text-align: justify !important;
            text-align-last: center;

            > .tmulti {
                font-size: .9rem;
                font-stretch: normal;
                margin-top: .5rem;

                &:not(:last-child) {
                    padding-bottom: .25rem;
                }

                .trow + .trow {
                    margin-top: .25rem;
                }
            }

            > .hlist {
                font-size: .9rem;
                font-stretch: 100%;
            }
        }

        .paragraphbreak {
            display: none;
        }

        /* 'United States Civil Administration of the Ryukyu Islands' */
        .ib-country-names {
            font-stretch: normal;
            margin-top: calc(var(--box-margin) * .25);
            padding-top: 0;
        }

        .ib-country-anthem {
            border: 0;
            margin: 0;
            padding: 0;
        }

        .ib-company-logo img {
            background-color: transparent;
        }

        /* 'Turkey (bird)', 'Cat', etc. */
        &.biota {
            tr, th {
                background: transparent !important;
            }

            > tbody > :first-child > th {
                &::first-line {
                    font-stretch: var(--sidebar-stretch);
                }

                > br {
                    display: none;
                }

                [style*="font-size: 85%"] {
                    font-size: 1em !important;
                }
            }

            td:first-child:not(:last-child) {
                font-stretch: var(--side-table-stretch);
                font-weight: var(--bold);
            }
        }

        /* 'Cristiano Ronaldo' */
        &.ib-youtube {
            .ib-youtube-above,
            .ib-youtube-header {
                color: var(--fg) !important;
            }
        }

        &[style*="line-height: 1.2em"],
        [style*="line-height: 1.2em"] {
            line-height: unset !important;
        }

        &.ib-chembox {
            caption {
                border-bottom: thin solid var(--fg);
                font-size: 1.1rem;
                font-stretch: var(--sidebar-stretch);
                font-weight: bold;
            }

            > tbody > tr > th[style*=background] {
                background-color: transparent !important;
            }

            td, th {
                border: 0;
            }

            th[colspan] {
                border-top: thin solid var(--fg);
                font-size: 105%;
            }

            tr:has(+ tr > th[colspan]) > * {
                padding-bottom: calc(var(--box-margin) * .25);
            }

            td:has(+ td) {
                font-stretch: var(--side-table-stretch);
                font-weight: bold;
            }

            td[colspan] {
                font-weight: bold;
                font-stretch: var(--side-table-stretch);

                > div {
                    font-weight: normal;
                    font-stretch: normal;
                }
            }

            .collapsible-list {
                > :first-child {
                    font-weight: bold !important;
                }
            }

            [style*=padding-left] {
                padding-left: 1rem !important;
            }

            [style*=border] {
                border: 0 !important;
            }

            tr:has(+ tr:last-child:empty) > * {
                padding-bottom: calc(var(--box-margin) * .5);
            }
        }
    }

    .infobox.vevent > tbody > tr {
        > td > table th {
            text-align: left;
        }

        > th[colspan] {
            background-color: transparent !important;
            border-top: thin solid var(--fg);
            font-size: 1em !important;
            font-stretch: var(--sidebar-stretch);

            &.summary {
                background: transparent !important;
                border-top: 0;
                border-bottom: thin solid var(--fg);
                font-size: 110% !important;
                font-stretch: var(--sidebar-stretch);
            }
        }

        > td[style*=border-right] {
            border-right: 0 !important;
        }
    }

    /***********************************/
    /* 'Template:Infobox football club */
    /***********************************/

    /* lol */
    .infobox > tbody > tr > td:has(> table > tbody > tr > td > [data-wiki-rs~=template-football-kit]) {
        border: 0 !important;

        [data-wiki-rs~=template-football-kit] {
            border-block: thin solid var(--fg) !important;
            border-inline: 0 !important;
            padding: calc(var(--box-margin) * .5) 0 !important;
            margin: calc(var(--box-margin) * .5) 0 !important;
            width: auto !important;
        }
    }

    /*************************/
    /* Template:Football kit */
    /*************************/

    [data-wiki-rs~=template-football-kit] {
        > :last-child {
            padding-top: 0 !important;
        }
    }

    /*******************/
    /* Template:Navbox */
    /*******************/

    /* nest everything to increase specificity, since the templatestyles uses
       complex selectors with high specificities */
    .navbox {
        &.navbox,
        .navbox-title,
        .navbox-group,
        .navbox-subgroup,
        .navbox-list,
        .navbox-even,
        .navbox-odd,
        .navbox-abovebelow {
            /* !important: 'Sociology' */
            background-color: transparent !important;
            border: 0;
        }

        &.navbox {
            border-top: 3px solid currentColor;
            /* !important: 'Crazy Taxi' */
            padding: 0 !important;
            margin-inline: 0;

            li {
                padding-left: 0;
            }
        }

        /* There is a much more pleasant way to do this, which is to use border-top
        on `tr + tr`. Unfortunately, to make sure there is a bottom border on a
        last row but *not* on a `.navbox-abovebelow`, the border has to be put on
        the bottom so it can be erased by `.navbox-abovebelow`. */
        tr > :is(.navbox-title, .navbox-abovebelow, .navbox-group, .navbox-image, .navbox-list) {
            border-bottom: thin solid var(--border-fg);
        }
        .navbox-subgroup tr:last-child > :is(.navbox-abovebelow, .navbox-group, .navbox-image, .navbox-list) {
            border-bottom: 0;
        }
        tr:last-child > .navbox-abovebelow {
            border-bottom: 0;
        }

        .navbox-list + .navbox-list {
            /* !important: 'Template:IBM personal computers' */
            border-left: thin solid var(--border-fg) !important;
        }

        /* 'Template:Mozilla' uses one of these weirdo hybrids */
        .navbox-list-with-group > div:first-child:not(:empty) {
            &:has(~ .navbox-subgroup) {
                /* !important: 'Template:Mozilla' */
                padding-inline: 1rem !important;
            }

            ~ .navbox-subgroup {
                border-top: thin solid var(--border-fg);
            }
        }

        .navbox-title,
        .navbox-group,
        .navbox-abovebelow {
            font-family: var(--sans);
        }

        /* 'Template:Solar system' */
        .navbox-group[scope=row][style*="text-align"] {
            text-align: right !important;
        }

        .navbox-columns-table {
            > tbody > tr > .navbox-list + .navbox-list > .navbox-subgroup {
                border-left: thin solid var(--border-fg) !important;
            }
        }

        .navbox-abovebelow {
            font-size: .9rem;
        }

        .navbox-title {
            font-size: 1rem;
            font-stretch: var(--sidebar-stretch);

            > :not(.navbar) {
                /* !important: Pages like 'Crazy Taxi' on an anonymous
                container */
                font-size: 1rem !important;
            }
        }

        .navbox-title,
        .navbox-abovebelow,
        .navbox-group {
            &[style*="box-shadow:"] {
                box-shadow: none !important;
            }
        }

        /* !important: 'Template:New York City' and 'Template:Mosques in India'
           and 'Template:Manchester United F.C.'.
           Caution is required because 'Template:Wikipedia policies and
           guidelines' uses colour differently in a way which is not so bad */
        .navbox-title,
        .navbox-title *,
        .navbox-abovebelow,
        .navbox-abovebelow :any-link *,
        .navbox-group,
        .navbox-group :any-link * {
            &[style*="color\:"] {
                color: unset !important;
            }
        }

        /* When navbox titles are rotated, as in 'Template:Carnivora', the
           inline styles rely on content-box to avoid overflow */
        .navbox-group {
            box-sizing: content-box;
        }

        .navbox-group:has(+ td .navbox-subgroup) {
            border-right: thin solid var(--border-fg);
        }

        .navbox-image {
            display: none;
        }

        /* 'Wikipedia:Five pillars' uses this */
        .navbox-columns-table {
            strong {
                font-family: var(--sans);
            }

            .navbox-list:not(.navbox-list-with-group) {
                border: 0 !important;
            }

            .navbox-list:not(:has(.navbox-subgroup)) + * {
                padding-left: calc(var(--box-margin) * .25) !important;
            }
        }

        .hlist td ul {
            + ul {
                padding-top: 0;
            }
            &:has(+ ul) {
                padding-bottom: 0;
            }
        }

        .wikitable, table.sortable {
            border-bottom: 0;
            margin-inline: 0;
            width: 100%;

            &[style*=line-height] {
                line-height: 1rlh !important;
            }

            td:first-child,
            th:first-child {
                padding-left: var(--table-padding-inline);
            }

            td:last-child,
            th:last-child {
                padding-right: var(--table-padding-inline);
            }
        }

        [style*="padding\:0 0.25em"] > :is(.wikitable, table.sortable) {
            margin-inline: -.25em !important;
            width: calc(100% + .5em) !important;
        }
    }

    .navbox-styles {
        display: none;
    }

    /* extra specificity to override `.navbox + .navbox-styles + .navbox` */
    > * + .navbox.navbox.navbox,
    .documentation > * + .navbox.navbox {
        clear: both;
        margin-top: var(--footer-margin);
    }

    /*******************/
    /* Template:Navbar */
    /*******************/

    .navbar-ct-full,
    .navbar-ct-mini {
        font-size: inherit;
    }

    /***********************/
    /* Template:Portal     */
    /* Template:Portal bar */
    /***********************/

    .portalborder {
        background: var(--box-tag);
        border: 0;
        padding: .25rem var(--tag-size);

        &.portalright {
            padding-right: 0;
            transform: var(--aside-gutter-align);
        }
    }

    .portalbox {
        background: var(--box-tag);
        padding-top: .25rem;
        padding-left: var(--tag-size);

        * + & {
            margin-top: var(--box-margin);
        }
    }

    .portalbox-entry {
        font-family: var(--sans);
        font-size: 88%; /* match side-box */
        display: block;
        line-height: 1;
        height: auto;
        font-style: normal;
        font-weight: normal;

        + .portalbox-entry {
            margin-top: calc(var(--box-margin) * .25);
        }
    }

    .portalbox-image,
    .portalbox-link {
        padding: 0;
    }

    .portalbox-image img {
        max-height: 1cap;
        max-width: 1cap;
    }

    .portalbox-link {
        padding-left: .3em;
    }

    .portal-bar, .sister-bar {
        font-family: var(--sans);
        margin-top: var(--footer-margin);

         + :is(.sister-bar, .portal-bar) {
            border-top: none;
            margin-top: 0;
         }
    }

    .portal-bar-bordered, .sister-bar {
        background-color: transparent;
        border: 0;
        border-top: thin solid var(--border-fg);
        border-bottom: thin solid var(--border-fg);
    }

    .sister-box {
        .side-box-abovebelow {
            padding: 0 .9em;
            text-align: left;
        }

        .side-box-text > ul {
            border-top: thin solid var(--fg);
            margin-inline: 0;
            margin-left: calc(-1cap - 4px);
            padding: calc(var(--box-margin) * .25) 0 0;

            > li {
                min-height: 0;

                + * {
                    margin-top: calc(var(--box-margin) * .25);
                }
            }
        }
    }

    .sister-logo {
        line-height: unset;
        vertical-align: top;
        width: auto;

        img {
            max-height: 1cap;
            max-width: 1cap;
        }
    }

    /***************************************/
    /* Template:Side box (portal-adjacent) */
    /***************************************/

    .side-box {
        border: 0;
        background: var(--box-tag);
        font-family: var(--sans);

        .side-box-text {
            padding-block: 0;
        }

        * + hr {
            margin-top: calc(var(--box-margin) * .25);
        }

        > * + * {
            margin-top: calc(var(--box-margin) * .25);
        }
    }

    .side-box-right {
        margin-bottom: var(--figure-margin);
        margin-left: var(--figure-margin);
        min-width: min-content;
        max-width: var(--aside-max);
        transform: var(--aside-gutter-align);

        .side-box-flex {
            min-width: min-content;
        }

        .side-box-text {
            padding-right: 0;
        }

        * + & {
            margin-top: var(--box-margin);
        }

        + .side-box-right {
            margin-top: calc(var(--figure-margin) * -.5);
        }
    }

    /***************************************/
    /* Template:Shortcut (portal-adjacent) */
    /***************************************/

    .module-shortcutboxplain {
        background: var(--box-tag);
        border: 0;
        font-family: var(--sans);
        margin: 0 0 var(--figure-margin) var(--figure-margin);
        padding: 0 0 0 var(--tag-size);

        > * + * {
            margin: 0;
        }
    }

    .module-shortcutlist {
        border: 0;
    }

    /********************/
    /* Template:Reflist */
    /********************/

    .reflist, .refbegin {
        font-size: inherit;
        margin-bottom: 0;
    }

    .reflist-columns {
        gap: calc(var(--ol-gutter) * 2);
    }

    .refbegin-hanging-indents > ul {
        padding-left: 2em;
        > li {
            padding-left: 0;
            text-indent: -2em;
        }
    }

    /***********************/
    /* Template:Blockquote */
    /***********************/

    blockquote, .templatequote {
        font-style: italic;
        margin-bottom: 0;
        padding-inline: 2.5rem;

        em, em em em, em em em em em {
            font-style: normal;
        }

        em em, em em em em, em em em em em em {
            font-style: italic;
        }
    }

    .templatequote {
        overflow: visible;
    }

    .templatequotecite {
        font-family: var(--sans);
        line-height: 1rlh;
        margin-top: .5em;
        text-align: end;

        em, em em em, em em em em em {
            font-style: italic;
        }

        em em, em em em em, em em em em em em {
            font-style: normal;
        }
    }

    /******************/
    /* Template:Mbox  */
    /* Template:Ambox */
    /* Template:Cmbox */
    /* Template:Fmbox */
    /* Template:Imbox */
    /* Template:Ombox */
    /* Template:Tmbox */
    /******************/

    .ambox, .cmbox, .fmbox, .imbox, .ombox, .tmbox {
        background: var(--box-tag);
        border: 0;
        font-family: var(--sans);
        margin-inline: 0;

        img {
            aspect-ratio: 1;
            display: block;
        }

        /* TODO: This violates the top-only rule because of missing <p> due to
           bad parsing */
        hr {
            margin: .5rem 0 calc(.5rem - 1px);
        }

        :is(.mw-parser-output, .documentation) > * + & {
            margin-top: var(--box-margin);
        }
    }

    .mbox-text {
        padding: 0;
    }

    .mbox-image {
        padding: .1rem .3rem 0 .3rem;
        vertical-align: top;
    }

    .mbox-empty-cell {
        padding-left: .5rem;
    }

    .mbox-small.mbox-small {
        margin: 0 0 var(--figure-margin) var(--figure-margin);

        * + & {
            margin-top: var(--box-margin);
        }
    }

    .compact-ambox .ambox {
        background: none;
        /* !important: Module’s own CSS uses !important */
        margin-left: 0 !important;
    }

    /**************************/
    /* Template:Documentation */
    /**************************/

    .documentation-container {
        clear: both;
        max-width: none;

        * + & {
            border-top: 3px solid currentColor;
            margin-top: 2rem;
            padding-top: .5rem;
        }
    }

    .documentation {
        background-color: transparent;
        border: 0;
        padding: 0;
    }

    .documentation-startbox {
        align-items: baseline;
        border-bottom-color: var(--fg);
        display: flex;
        font-family: var(--sans);
        padding: 0;
        margin-bottom: 0;

        > :first-child {
            flex: 1;
        }
    }

    .documentation-heading {
        font-stretch: 120%;

        img {
            max-height: 1cap;
        }
    }

    .documentation-metadata {
        background-color: transparent;
        border: 0;
        border-top: 3px solid;
        font-family: var(--sans);
        font-style: normal;
        padding: .5rem 0 0;
        margin: 4rem 0 0;
    }

    .documentation {
        > :where(:not(.documentation-startbox)) {
            max-width: var(--max-width);
        }

        [style*="display: inline-grid"] {
            + [style*="display: inline-grid"] {
                margin-left: var(--box-margin);
            }

            .wikitable {
                margin-inline: 0;
                width: auto;
            }
        }
    }

    /*******************************/
    /* Template:Video game reviews */
    /*******************************/

    .video-game-reviews {
        margin-bottom: var(--figure-margin);
        margin-left: var(--figure-margin);
    }
    .vgr-reviews caption {
        font-family: var(--sans);
    }

    .vgr-center {
        text-align: left;
    }

    .vgr-stacked {
        margin-top: calc(var(--box-margin) * .5);
    }

    .vgr-title {
        font-family: var(--sans);
    }

    /***************************/
    /* Template:Image frame    */
    /* Template:Multiple image */
    /***************************/

    .thumb {
        font-family: var(--sans);
        /* api.php?meta=siteinfo&siprop=general thumblimits maxes out at 400 */
        /* !important: 'Module:Wide image' defaults non-existing image width to
           0 (and therefore max-width to 10px) */
        &[style*="max-width\:10px"] {
            max-width: 400px !important;
        }

        .multiimageinner[style*="max-width:100px"] {
            /* !important: This module blindly calculates values even if none
               are available, which means it ends up forced to 100px wide */
            max-width: 400px !important;
            width: auto !important;
        }

        .tsingle {
            margin: 0;
        }

        .trow {
            gap: calc(var(--figure-margin) / 2);

            > * {
                flex: 1 1 0%;
                min-width: 0;
            }

            .thumbimage:has(~ .text-align-center) {
                text-align: center;
            }
        }
    }

    /***********************/
    /* Template:Row header */
    /***********************/

    .table-rh {
        /* !important: Even though this template uses a class, it still also
           unconditionally inlines styles */
        background-color: transparent !important;
        color: inherit !important;
        font-family: var(--sans);
        line-height: 1.2;

        > .hatnote {
            font-weight: normal !important;
            margin-top: calc(var(--box-margin) * .5);
        }
    }

    /*****************************/
    /* Template:Spoken Wikipedia */
    /*****************************/

    .spoken-wikipedia {
        border: 0;
        border-top: 3px solid currentColor;
        font-family: var(--sans);
    }
    .spoken-wikipedia-disclaimer {
        hyphens: manual;
    }

    /************************/
    /* Template:Compact TOC */
    /************************/

    .toc {
        border-top: 3px solid currentColor;
        font-family: var(--sans);

        .toctitle {
            font-stretch: 120%;

            + * {
                border-top: thin solid var(--border-fg);
                padding-top: calc(var(--box-margin) * .25);
            }
        }

        > div {
            text-align: center;
        }
    }

    /**********************/
    /* Template:Quote box */
    /**********************/

    .quotebox {
        background: transparent;
        border: 0;
        border-bottom: thin solid currentColor;
        border-top: 3px solid currentColor;
        padding: calc(var(--box-margin) * 2) var(--box-margin) calc(var(--box-margin) * 2) calc(var(--box-margin) * 2);

        &.floatright,
        &.floatleft {
            max-width: var(--aside-max);
            min-width: var(--aside-min);
            margin: var(--box-margin) calc(var(--box-margin) * -1) var(--figure-margin) var(--figure-margin);
        }

        &.floatleft {
            margin-inline: calc(var(--box-margin) * -1) var(--figure-margin);
        }

        .left-aligned {
            text-align: justify;
        }

        cite {
            font-style: italic;

            /* 'Social class' uses this and it looks bad */
            &.left-aligned {
                text-align: right;
            }
        }
    }

    /**************************************/
    /* Template:Timeline of release years */
    /**************************************/

    .release-timeline {
        border-collapse: separate;
        border-spacing: 0 1px;
        clear: right;
        font-family: var(--sans);
        font-size: 95%;
        float: right;
        line-height: inherit;
        margin: 0 calc(var(--box-margin) * -1) var(--figure-margin) var(--figure-margin);
        padding: 0;
        transform: var(--aside-gutter-align);
        width: auto;

        > caption {
            border-bottom: thin solid var(--border-th);
        }

        td, th {
            line-height: 1.2;
        }

        th[style*=border-right] {
            border-right-width: .5ch !important;
        }

        td {
            font-stretch: var(--side-table-stretch);
        }
    }

    /************************************/
    /* Template:Template journal inline */
    /************************************/

    .tj-tape {
        font-family: var(--mono);
    }

    /********************/
    /* Template:Div col */
    /********************/

    * + .div-col {
        margin-top: var(--box-margin);
    }

    .div-col-rules {
        column-rule: none;
    }

    /**************************/
    /* Template:Climate chart */
    /**************************/

    /* .infobox is for extra specificity */
    [data-wiki-rs~=template-climate-chart].infobox {
        --heat-gradient: linear-gradient(to bottom, red 20%, blue 80%);

        border: none !important;
        font-variant-numeric: lining-nums;
        margin-bottom: var(--figure-margin) !important;

        &[style*="float\: left"] {
            margin-right: var(--figure-margin) !important;
        }

        &[style*="float\: right"] {
            margin-left: var(--figure-margin) !important;
        }

        /* axis display, part 1 */
        [style*="bottom:dotted"] {
            display: none;
        }

        /* axis display, part 2 */
        tr:has(> td > [style*="position:relative"]) {
            background: #fff url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="3" height="2"><circle cx="1" cy="1" r=".5" fill="%23999" /></svg>')  repeat-x 0 calc(50% + .5em);
            position: relative;

            > :first-child::before {
                background-image: var(--heat-gradient);
                content: '';
                bottom: 1.5em;
                left: 0;
                mix-blend-mode: screen;
                pointer-events: none;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1;
            }
        }

        [data-wiki-rs~=template-climate-chart-celsius-column],
        [data-wiki-rs~=template-climate-chart-celsius-column-i],
        [data-wiki-rs~=template-climate-chart-fahrenheit-column],
        [data-wiki-rs~=template-climate-chart-fahrenheit-column-i] {
            /* improve legibility of labels on the axis */
            span {
                background-color: #fff;
                color: #000 !important;
                padding-inline: .15em;
                margin-inline: -.15em;

                &[style*="font-size\:70%"] {
                    font-size: 80% !important;
                    font-stretch: var(--side-table-stretch);
                }
            }

            /* the actual temperature and precipitation bars */
            div[style*="background\:#e44"],
            div[style*="background\:#ace"] {
                background: var(--bar-fill) !important;
                border: thin solid #000;
                /* to stop unscaled giant precipitation interfering with the
                   title link */
                pointer-events: none;
            }

            div[style*="background\:#ace"] {
                background: var(--bar-fill-alt) !important;
            }
        }

        th {
            border-top: thin solid var(--fg);
            font-size: 1rem !important;
        }

        /* legend swatches */
        td[colspan] > span:first-child:not(.reference) {
            border: 1px solid var(--legend-border);
            color: transparent !important;
            display: inline-block;
            line-height: var(--legend-lh);
            height: var(--legend-wh);
            vertical-align: var(--legend-valign);
            width: var(--legend-wh);

            &[style*="red"],
            &[style*="#aaccee"] {
                color: transparent !important;
                background: var(--heat-gradient), var(--bar-fill), #fff !important;
                background-blend-mode: screen, normal, normal;
            }

            &[style*="#aaccee"] {
                color: transparent !important;
                background: var(--heat-gradient), var(--bar-fill-alt), #fff !important;
            }
        }

        .infobox {
            margin-right: 0 !important;
            margin-top: calc(var(--box-margin) * .5) !important;

            th {
                /* The emulated margin-top of a secondary conversion chart */
                padding-bottom: calc(var(--box-margin) * .25);
            }
        }

        > tbody {
            > tr > td > .infobox {
                /* The margin-top of the primary conversion chart */
                margin-top: calc(var(--box-margin) * .25) !important;
            }

            > tr:first-child > th {
                border-top: 3px solid var(--fg);
                font-stretch: var(--sidebar-stretch);
            }
        }
    }

    /************************/
    /* Template:Weather box */
    /************************/

    [data-wiki-rs~=template-weather-box] {
        .wikitable,
        /* A lot of pages like 'Jakarta' and 'Tromsø' shove an untemplated
           “climatic data” table right after the weather box */
        + .wikitable {
            border-bottom: none;
            width: var(--table-width) !important;

            td {
                border: solid var(--bg);
                border-width: thin 0 0 thin;
                font-family: var(--sans);
                font-size: 90%;
                text-align: center;
                text-align: "." right;
                padding-inline: calc(var(--table-padding-inline) * .5);
                width: 6%;
                white-space: nowrap;

                &::first-line {
                    font-size: 1rem;
                }

                &:last-child {
                    padding-inline: var(--table-padding-inline);
                }

                &[style*="color:"] {
                    background-image: var(--bar-fill-light) !important;
                    background-blend-mode: soft-light;
                }
            }

            tr:first-child > th {
                font-weight: normal;
                &::first-line {
                    font-weight: var(--bold);
                }
            }

            tr:nth-child(2) > th[scope=row] {
                border-bottom: thin solid var(--border-th);
            }

            tr:last-child,
            tr:nth-last-child(2):has(> [colspan]) {
                background: transparent;

                > * {
                    /* !important: 'Tromsø' climatic data table */
                    background: transparent !important;
                    /* hiding the border gap requires using a unit with a known
                    size; `thin` is undefined in CSS */
                    border-top: 1px solid var(--border-fg);
                    line-height: 1rlh;

                    /* hiding the border gap */
                    &:last-child {
                        position: relative;

                        &::before {
                            content: '';
                            position: absolute;
                            top: -1px;
                            left: 0;
                            right: 0;
                            border-top: 1px solid var(--border-fg);
                        }
                    }
                }

                + tr:last-child > * {
                    border-top: 0;

                    &:last-child::before {
                        display: none;
                    }
                }
            }

            th[scope=col] {
                /* hiding the border gap requires using a unit with a known
                   size; `thin` is undefined in CSS */
                border-bottom-width: 1px;
                text-align: center;

                &[style*="border-left-width\:medium"] {
                    position: relative;
                    &::after {
                        border-bottom: 1px solid var(--border-th);
                        bottom: 0;
                        content: '';
                        left: 0;
                        position: absolute;
                        /* "thin" and "medium" are unspecified in CSS */
                        width: 12px;
                        transform: translate(-6px, 1px);
                    }
                }
            }
        }

        /* !important: 'Jakarta' */
        + .wikitable {
            margin-inline: var(--table-margin-inline) !important;

            tr:nth-child(2) > th {
                border-bottom: 1px solid var(--border-th);

                &:last-child {
                    position: relative;
                    &::after {
                        border-bottom: 1px solid var(--border-th);
                        bottom: 0;
                        content: '';
                        left: 0;
                        position: absolute;
                        /* "thin" and "medium" are unspecified in CSS */
                        width: 12px;
                        transform: translate(-6px, 1px);
                    }
                }
            }
        }
    }

    /***********************************/
    /* Template:Historical populations */
    /* Template:US Census population   */
    /***********************************/
    .us-census-pop,
    [data-wiki-rs~=template-historical-populations] {
        border-bottom: none;
        margin: 0 var(--table-margin-inline) var(--figure-margin) var(--figure-margin) !important;

        caption {
            border-bottom: thin solid var(--border-th);
            padding: 0 !important;
        }

        th, td {
            padding: var(--table-padding-block) var(--table-padding-inline) !important;
        }

        td {
            font-family: var(--sans);
            font-variant-numeric: tabular-nums;
            font-stretch: var(--side-table-stretch);
        }

        tr:last-child:last-child:last-child {
            background-color: transparent;

            > * {
                border-top-color: var(--border-fg) !important;
                border-top-width: thin !important;
                font-stretch: normal;
            }
        }
    }

    /* 'Tromsø' */
    [data-wiki-rs~=template-historical-populations][style*="float:none"] {
        font-size: 1em !important;
        margin-inline: var(--table-margin-inline);
        max-width: none;
        width: var(--table-width);

        td:not(:first-child) {
            padding-left: calc(var(--table-padding-inline) * .5) !important;
        }

        td:not(:last-child) {
            padding-right: calc(var(--table-padding-inline) * .5) !important;
        }
    }

    [data-wiki-rs~=template-historical-populations]:where([style*="float:right"], [style*="float:left"]) {
        caption, th {
            font-stretch: var(--side-table-stretch);
        }
    }

    /*********************/
    /* Template: Bar box */
    /*********************/

    .barbox {
        font-family: var(--sans);
        font-stretch: var(--side-table-stretch);
        overflow-x: visible !important;

        table {
            margin-inline: var(--table-margin-inline);
            width: var(--table-width);
        }

        th, td {
            font-variant-numeric: tabular-nums;
        }

        tr:nth-child(2) {
            display: none;
        }

        tr:first-child,
        tr:last-child {
            border-bottom: thin solid var(--border-th);
        }

        tr:first-child {
            border-color: var(--fg);

            > th {
                padding-inline: var(--table-padding-inline);
            }
        }

        > div {
            background: transparent !important;
            border: none !important;
            padding: 0 !important;
            font-size: 1rem !important;
        }
    }

    /*************************/
    /* Template: Bar chart   */
    /* Template: Bar percent */
    /*************************/

    .bar-chart {
        border: none;

        caption {
            font-family: var(--sans);
            font-weight: normal;
            font-stretch: normal;
        }

        /* TODO: Whitespace parsing error generating graf tags? */
        p {
            display: none;
        }
    }

    /* THIS TEMPLATE IS INCREDIBLY OBNOXIOUS. */
    .bar-chart tr:not(:first-child):nth-child(2n):hover {
        background-color: var(--shade-bg);
    }

    .bar-chart-right {
        font-stretch: var(--side-table-stretch);
    }

    [data-wiki-rs~=template-bar-percent],
    .bar-chart tr {
        &:nth-child(2n) {
            background-color: var(--shade-bg);
        }

        > td:first-child {
            min-width: 0 !important;
        }

        > td:nth-child(2) {
            border-left: thin solid var(--fg) !important;
            border-right: none !important;
            min-width: 100px;
            padding: 0;
            width: auto !important;
        }

        > td:last-child {
            padding-right: var(--table-padding-inline);
        }
    }

    [data-wiki-rs~=template-bar-percent] > td > div,
    .bar-chart-bar-line {
        background: var(--bar-fill) !important;
        border: solid black;
        border-width: thin thin thin 0;
        display: inline-block;
        vertical-align: middle;
        height: 1em;
    }

    .bar-chart-bar {
        display: inline-block;
        white-space: nowrap;
        width: auto !important;
    }

    .bar-chart-bar-numbers {
        background: var(--bg);
        background-clip: content-box;
        font-family: var(--sans);
        font-size: 90%;
        font-stretch: 110%;
        position: static;
        margin-left: 0.15em;
    }

    /********************/
    /* Template:S-start */
    /********************/

    .succession-box.succession-box {
        border-top: thin solid var(--border-fg);

        .navbox & {
            border: none;
            margin: 0 !important;
            width: 100%;
        }

        * {
            text-align: inherit;
        }
    }

    /***************************/
    /* Template:Largest cities */
    /***************************/

    [data-wiki-rs~=template-largest-cities] {
        > table {
            border-inline: none !important;
            border-color: var(--border-fg) !important;
            border-top: 3px solid currentColor !important;
            font-size: 1em !important;
            font-variant-numeric: tabular-nums;
            margin-inline: var(--table-margin-inline) !important;
            width: var(--table-width) !important;
        }

        th {
            border-bottom: thin solid var(--border-fg);

            span[style*=font-size] {
                font-stretch: var(--sidebar-stretch);
            }
        }

        tr:nth-child(2n + 1) td:not([rowspan]) {
            background-color: var(--shade-bg);
        }

        td {
            padding: .25em;

            &:first-child {
                padding-left: var(--table-padding-inline);
            }

            &:last-child {
                padding-right: var(--table-padding-inline);
            }

            &:has(+ .largestCities-cell-background) {
                padding-right: 1em;
            }

            &:not([rowspan]) + .largestCities-cell-background {
                border-left: thin solid var(--border-fg);
            }
        }
    }

    .largestCities-cell-background {
        background-color: transparent;
    }

    /******************************/
    /* Template:Phanerozoic 220px */
    /******************************/

    [data-wiki-rs~=template-phanerozoic-220px] {
        font-size: 1em !important;

        > * {
            background: transparent !important;
        }

        > [name=Range] {
            pointer-events: none;

            * {
                font-stretch: normal;
                font-size: 90% !important;
                font-weight: bold;
            }
        }

        > * + [data-wiki-rs~=template-fossil-range-bar] {
            border-left: thin dotted var(--fg);
        }

        * {
            font-stretch: 50%;
            padding: 0 !important;
        }

        a {
            display: block;
            line-height: 100%;

            &:any-link {
                font-weight: normal;
            }
        }
    }

    /**************************/
    /* Template:Clade gallery */
    /**************************/

    > .clade-gallery.clade-gallery {
        display: block;
        font-family: var(--sans);
        margin-inline: 0;

        * + & {
            margin-top: var(--box-margin);
        }

        .main-caption,
        .main-content {
            padding: 0;
        }

        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: var(--box-margin);

            > * {
                flex: 1;
            }
        }

        .gallery-element {
            border: none;
        }

        .cladogram.cladogram {
            font-stretch: var(--side-table-stretch);
            padding: 0;
        }

        .clade * {
            border-color: var(--border-clade);
        }

        .clade-leaf {
            &:first-letter {
                padding-left: .15em;
            }

            b {
                font-stretch: normal;
            }

            img {
                /* TODO: max-height is just because of no media support to keep
                   things from being crazy */
                max-height: 1em;
                vertical-align: middle;
            }
        }
    }

    /**********************/
    /* Template:Pie chart */
    /**********************/

    .pie-thumb .smooth-pie-container {
        padding: 0;
    }

    .smooth-pie,
    .smooth-pie-legend .l-color {
        filter: saturate(200%) contrast(200%) brightness(200%) hue-rotate(50deg);
    }
    .smooth-pie {
        &::before {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1;
            pointer-events: none;
            content: '';
            background: var(--bar-fill);
            border-radius: 50%;
            mix-blend-mode: overlay;
        }

        [title] {
            cursor: help;
        }
    }

    .smooth-pie-legend .l-color {
        background-image: var(--bar-fill) !important;
        background-size: 4px 4px !important;
        background-blend-mode: overlay;
    }

    /***********************/
    /* Template:Ahnentafel */
    /***********************/

    [data-wiki-rs~=template-ahnentafel] {
        font-family: var(--sans);

        > table {
            border: none !important;
            font-size: 1em !important;
        }

        .ahnentafel {
            font-stretch: var(--side-table-stretch);

            td {
                border-color: var(--border-th) !important;
            }

            td[style*=background-color] {
                background-image: var(--bar-fill-light);
                background-position: 0;
            }
        }
    }

    /*********************/
    /* Template:Fix span */
    /* Template:CN span  */
    /*********************/

    .citation-needed-content {
        border: 0 !important;
        padding-inline: 0 !important;
        text-decoration: underline wavy var(--border-th);

        + .Template-Fact {
            margin-left: -.15em !important;
            margin-right: .15em;
        }
    }

    /*********************/
    /* Template:Routemap */
    /*********************/

    .RMbox {
        border-bottom: 3px solid var(--fg);
        box-shadow: none;
        font-family: var(--sans);

        .selfreference {
            border-bottom: thin solid var(--border-th);
            font-size: 100% !important;
            padding-block: calc(var(--box-margin) * .25);
        }

        > tbody > tr > td:has(> .selfreference) {
            padding-top: 0 !important;
            padding-inline: 0 !important;
        }

        .routemap {
            font-stretch: var(--side-table-stretch);
            margin-bottom: calc(var(--box-margin) * .5);
        }

        > tbody > tr:first-child > th {
            background-image: linear-gradient(transparent 3px, var(--bg) 3px) !important;
            border-bottom: thin solid var(--border-fg);
            color: var(--fg) !important;
            font-stretch: var(--sidebar-stretch);
            line-height: 1;
            padding-top: calc(5px + 3px) !important;
            vertical-align: baseline;

            [style*=color] {
                color: unset !important;
            }
        }

        .autocollapse > tbody > tr:first-child > th,
        > tbody > tr:not(:first-child) > th {
            background-color: transparent !important;
            border-top: 3px solid var(--fg) !important;
            color: var(--fg) !important;
            font-stretch: var(--sidebar-stretch);
            padding: 0 !important;
        }

        > tbody > tr:not(:first-child) > th {
            border-top: thin solid var(--border-fg) !important;
            font-stretch: 100%;
        }
    }

    /*******************/
    /* Template:Markup */
    /*******************/

    [data-wiki-rs~=template-markup] {
        margin-inline: var(--table-margin-inline) !important;
        width: var(--table-width) !important;

        * + & {
            margin-top: var(--box-margin) !important;
        }

        > tbody > tr > td {
            border: 0 !important;
            padding: var(--table-padding-block) var(--table-padding-inline) !important;

            + td:not([style*="border-style: none"]) {
                border: thin solid var(--border-fg) !important;
            }
        }
    }

    /***************/
    /* Template:Xt */
    /***************/

    .example:not(.monospaced) {
        font-family: var(--serif) !important;
    }

    /*******************************************/
    /* Template:Article for improvement banner */
    /*******************************************/

    [data-wiki-rs~=template-article-for-improvement-banner] {
        text-align: unset !important;
    }

    /*********************/
    /* Template:Flagicon */
    /*********************/

    .flagicon img {
        max-height: 1cap;
    }

    /*************************/
    /* Template:Location map */
    /*************************/

    .switcher-container {
        margin-top: calc(var(--box-margin) * .5);

        > :nth-child(n+2) {
            display: none;
        }
    }

    .locmap {
        font-stretch: var(--side-table-stretch);
        text-align: center;

        .od {
            font-stretch: normal;
        }

        img {
            display: block;
        }
    }

    /*******************************/
    /* Template:Static row numbers */
    /*******************************/

    .static-row-numbers.static-row-numbers.wikitable {
        font-variant-numeric: tabular-nums;

        > tbody > tr {
            &::before {
                font-family: var(--sans);
                padding: var(--table-padding-block) var(--table-padding-inline);
                width: 0;
            }

            &:has(> th[scope=col])::before {
                /* !important: 'Template:Static row numbers' styles does it */
                border-bottom: thin solid var(--border-th) !important;
                counter-increment: none;
                content: "";
            }

            &:first-child:has(> th[scope=col]):has(+ tr > th[scope=col])::before {
                border-bottom: 0 !important;
            }

            &::before {
                border: 0;
            }

            &.static-row-header:not(.sortbottom, .sorttop)::before {
                border-bottom: thin solid var(--border-th);
            }
        }
    }

    .static-row-header-text.static-row-numbers > tbody:first-child > tr:first-child:has(+ tr > th[scope=col], + .static-row-header) {
        &::before {
            content: "";
        }

        + tr::before {
            content: "No.";
            font-weight: bold;
        }
    }

    .static-row-header-hash.static-row-numbers > tbody:first-child > tr:first-child:has(+ tr > th[scope=col], + .static-row-header) {
        &::before {
            content: "";
        }

        + tr::before {
            content: "#";
            font-weight: bold;
        }
    }

    .sticky-header-multi {
        > tbody > tr:first-child {
            position: sticky;
            top: 0;
        }
    }

    /********************/
    /* Template:Tracked */
    /********************/

    .tracked {
        background: var(--box-tag);
        border: 0;
        border-radius: 0;
        font-family: var(--sans);
        margin-bottom: var(--figure-margin);
        margin-right: var(--figure-margin);
        padding: calc(var(--tag-size) / 2) var(--tag-size);
        text-align: left;
    }
}
